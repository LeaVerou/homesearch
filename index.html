<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Home search</title>
	<link rel="icon" href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">🏡</text></svg>'>
	<link rel="stylesheet" href="https://get.mavo.io/mavo.css">
	<link rel="stylesheet" href="style.css">
</head>
<body mv-app="homesearch" mv-storage="https://github.com/leaverou/homesearch/homes.json" class="mv-autoedit">

<table>
	<thead>
		<tr>
			<th>Picture</th>
			<th>URL</th>
			<th>Location</th>
			<th>Basic Info</th>
			<th>Notes</th>
		</tr>
	</thead>
	<tbody mv-list>
		<tr mv-list-item="home">
			<td>
				<a href="[url]" target="_blank">
					<img src="" alt="" property="picture">
				</a>
			</td>
			<td>
				<a property="url">[getWebsite(url)]</a>
			</td>
			<td>
				<div class="[if(contains(address, 'Cambridge'), 'good', 'ok')]">
					Address:
					<a href="https://www.google.com/maps/search/[address]?hl=en" property="address" mv-attribute="null" target="_blank"></a>
				</div>
				<div>
					Walk to preschool:
					<a href="https://www.google.com/maps/dir/[address]/Capucine+Montessori+School,+Massachusetts+Avenue,+Cambridge,+MA,+USA/@42.3921544,-71.123942,17z/?hl=en" target="_blank">
						<span property="commute"></span>
					</a>
				</div>
			</td>
			<td>
				<div class="basic-info">
					<div title="Beds" class="[if(beds < 2, 'terrible', if(beds > 2, 'good', 'ok'))]">
						🛏 <span property="beds" mv-default="2"></span>
					</div>
					<div title="Baths" class="[if(baths > 1, 'great', 'ok')]">
						🛁 <span property="baths" mv-default="1"></span>
					</div>
					<div title="Monthly rent" class="[if(rent < 2800, 'good', if(rent >= 3100, 'bad', 'ok'))]">
						💰 <span property="rent"></span>
					</div>
					<div title="Broker fee" class="[if(fee='Unknown', '', if(free='None', 'ok', if(fee='1 rent', 'terrible', 'bad')))]">
						🤑 <span property="fee" mv-options="None, ½ rent, 1 rent, Unknown"></span>
					</div>
					<div title="Area" class="[if(area > 1100, 'great', if(area < 900, 'bad', 'ok'))]">
						📐 <span property="area"></span>
					</div>
					<div title="Laundry" class="[if(laundry ='On-site', 'good', 'bad')]">
						🧺 <span property="laundry" mv-options="On-site, In basement, None"></span>
					</div>
					<div title="Parking" class="[if(parking='Off-street', 'great', 'ok')]">
						🚗 <span property="parking" mv-options="Street, Off-street"></span>
					</div>
					<div title="Level" class="[if(level = 1, 'ok', if(level=2, 'bad', ''))]">
						🪜 <span property="level" mv-options="1: 1st (Ground) floor, 2: 2nd floor, Unknown"></span>
					</div>
				</div>
			</td>
			<td property="notes"></td>
		</tr>
	</tbody>
</table>

<script src="https://get.mavo.io/mavo.js"></script>
<script>
function getWebsite(url) {
	return !!Mavo.value(url) ? new URL(url).host.replace(/^www\./, "") : "(Website)";
}

document.addEventListener("click", evt => {
	if (evt.target.closest('[mv-mode="edit"] a[property]')) {
		evt.preventDefault();
	}
});
</script>
</body>
</html>